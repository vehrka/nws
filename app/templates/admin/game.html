{% extends "admin/admin.html"%}
{% import "bootstrap/wtf.html" as wtf %}
{% set active_page = 'admin.games' %}
{% block principal %}
<h1>{{ game.name }} <small>{{ game.date }}</small></h1>

<div class="panel panel-default">
    <div class="panel-heading clickableRow" role="tab" id="headingDesc" data-toggle="collapse" data-parent="#accordion" href="#collapseDesc" aria-expanded="true" aria-controls="collapseDesc">
        <h3 class="panel-title">Description</h3>
    </div>
    <div id="collapseDesc" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingDesc">
        <div class="panel-body">
            {{ game.desc }}
        </div> <!-- "panel-body"-->
    </div> <!-- "panel-collapse collapse in"-->
</div> <!-- "panel panel-default"-->

<div class="panel panel-default">
    <div class="panel-heading clickableRow" role="tab" id="headingSides"  data-toggle="collapse" data-parent="#accordion" href="#collapseSides" aria-expanded="false" aria-controls="collapseSides">
        <h3 class="panel-title">Sides</h3>
    </div>
    <div id="collapseSides" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSides">
        <div class="panel-body">
            {% for side in sides %}
            <div class="col-md-3">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">{{ side }}</h3>
                    </div>
                    <div class="panel-body">
                        <ul>
                        {% for player in sides[side] %}
                        {% if not game.finished %}
                        <li><a href="{{ url_for('admin.player', id=player.id)  }}">{{ player.plausr.name }}</a></li>
                        {% else %}
                        <li>{{ player.plausr.name }}</li>
                        {% endif %}
                        {% endfor %}
                        </ul>
                    </div>
                </div>
            </div> <!-- "col-md-3"-->
            {% endfor %}
        </div> <!-- "panel-body"-->
    </div> <!-- "panel-collapse collapse in"-->
</div> <!-- "panel panel-default"-->

{% if not game.finished %}
<div class="panel panel-default">
    <div class="panel-heading clickableRow" role="tab" id="headingFinish" data-toggle="collapse" data-parent="#accordion" href="#collapseFinish" aria-expanded="false" aria-controls="collapseFinish">
        <h3 class="panel-title">End Game</h3>
    </div>
    <div id="collapseFinish" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFinish">
        <div class="panel-body">
            {{ wtf.quick_form(form) }}
        </div> <!-- "panel-body"-->
    </div> <!-- "panel-collapse collapse in"-->
</div> <!-- "panel panel-default"-->
{% endif %}
{% endblock %}
{% block scripts %}
{{ super() }}
<script>
    jQuery(document).ready(function($) { $(".clickableRow").click(function() { window.document.location = $(this).attr("href"); }); });
</script>
{% endblock %}

